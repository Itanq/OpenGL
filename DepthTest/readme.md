
## 深度测试

深度测试决定了那个fragment应该被丢弃,那个fragment应该被保留.所以,在同时渲染了多个物体的情况下非常有用.

默认是关闭的,所以,我们可以通过glEnable(GL_DEPTH_TEST)来开启,也可用通过glDepthFunc()函数来修改深度测试的比较运行符.
有如下一些比较运算符:

|GL_ALWAYS	|深度测试永远通过。                                 |     
|-----------|----------------                                   |
|GL_NEVER	|深度测试永远不通过。                               |
|GL_LESS	|如果fragment的深度值小于被储存的深度值时则通过。   |
|GL_EQUAL	|当fragment的深度值等于所储存的深度值时则通过。     |
|GL_LEQUAL	|若fragment的深度值小雨或等于储存的深度值则通过。   |
|GL_GREATER	|当fragment的深度值大于所储存的深度值时则通过。     |
|GL_NOTEQUAL|	若fragment的深度值不等于所储存的深度值则通过。  |
|GL_GEQUAL	|若fragment的深度值大于或等于所储存的深度值则通过。 |

默认是GL_LESS,GL_ALWAYS相当于没有开启深度测试

**场景中的深度值并不是线性变换的.**

深度测试可能产生z-fighting现象.就是当两个平面或三角形靠的太近而出现的失真现象.

产生的原因在于,深度测试没有足够的精度确定那个形状应该在前面,那个形状应该在后面,从而两个形状持续的交换顺序导致的失真现象.

避免的方法就是要么不要靠的太近,要么提高精度,要么把近平面设置的远一点.

